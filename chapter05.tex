%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Тестирование и анализ результатов}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

***

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Методика испытаний}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

***

Методика испытаний разработанного прототипа генератора систем инструментирования заключается в ручном составлении пользовательских правил инструментирования и последующем применении этих правил к некоторому тексту программы при помощи системы инструментирования (генератора) с последующим анализом полученного инструментированного текста программы.

***

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Программа испытаний}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

***

Программа испытаний разработанного прототипа заключается в выполнении следующей последовательности операций:

\begin{enumerate}[label=\arabic*]
  \item Выполняется выбор целевых языков программирования.
  \item Для каждого выбранного языка программирования:
    \begin{enumerate}[label*=.\arabic*]
      \item составление библиотеки добавляемых в исходный текст программы фрагментов -- несколько взаимосвязных фрагментов;

      \item поиск существующей грамматики языка;
      \item составление аннотации к выбранной грамматике;
      \item отладка аннотации и грамматики;

      \item ручное написание синтетического тестового исходного кода;
      \item выбор фрагментов исходных текстов некоторого существующего программного обеспечения с открытым исходным кодом и лицензией, позволяющей вносить изменения лицам, не являющимся членами группы разработки или компании-разработчика;
      \item выполнение нормализации исходных текстов при помощи грамматики выбранного языка и утилиты TXL;

      \item осуществляется постановка тестовых задач;
      \item составление пользовательских правил инструментирования для решения поставленной задачи;

      \item выполнение инструментирования при помощи разработанного прототипа;
      \item анализ полученного инструментированного текста программы на соответствие описанным ожиданиям, описанных в виде пользовательских правил инструментирования.
    \end{enumerate}

  \item Общий анализ полученных результатов и оценка возможностей по усовершенствованию разработанного прототипа.
\end{enumerate}

***

%%%%%%%%%%%%%%%%%%
\subsection{Языки программирования}
%%%%%%%%%%%%%%%%%%

***

В данной работе было выполнено инструментирование фрагментов исходных текстов нескольких программ, созданных с использованием различных языков программирования общего назначения с разной степенью поддержки структурного программирования.

Для утилиты TXL опубликованы описания грамматик некоторых языков программирования общего назначения, такие как \cite{txl-resources}:
\begin{multicols}{2}
\begin{itemize}[noitemsep]
  \item TXL
  \item PHP
  \item JavaScript
  \item Ada
  \item ATL
  \item Ada
  \item C\#
  \item Eiffel
  \item Fortran
  \item Modula 3
  \item Ruby
  \item VisualBasic

  \item Java
  \item Python
  \item Object Pascal
  \item С++
\end{itemize}
\end{multicols}

Поскольку некоторые языки обладают схожей степенью строгости применительно к структурному программированию, например: C\# и Java, С++ и PHP, VisualBasic и Object Pascal, были рассмотрены программы на следующих языках программирования:
\begin{itemize}[noitemsep]
  \item Java
  \item Python
  \item Object Pascal
  \item С++
\end{itemize}

В список были ключены языки Python и Object Pascal по причине применения отличного от "C-подобного" стиля оформления блоков кода: Python -- отступы, Object Pascal -- специальные ключевые слова "begin" и "end".

***

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Протокол испытаний}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

В соответствии с рассмотренной выше программой и методикой испытаний было выполнено тестирование разработанного прототипа генератора систем инструментирования исходного текста программ.
Далее приведены тестовые данные вместе с полученными результатами.

%%%%%%%%%%%%%%%%%%
\subsection{Инструментируемые приложения}
%%%%%%%%%%%%%%%%%%

В данном разделе будут рассмотрены исходные тексты программ, использованных при тестировании прототипа.
Тестирование было проведено как с заранее приготовленными синтетическими данными (специально подобранные упрощенные тексты программ, главная цель которых заключается в проведении оценки работоспособности разработанного метода инструментрования вместе с отладкой аннотации грамматики целевого языка программирования), так и с текстами из кодовых баз различных программных продуктов промышленного уровня.

%%%%%%%%
\subsubsection{C++}
%%%%%%%%

***

Для утилиты TXL существует грамматика, описывающая синтаксис языка C++, а именно, стандарта ANSI C++ 3.0.

***

\begin{lstlisting}[frame=single, language=C, label={test-c}, caption={Исходный текст тестового приложения}]
#include <iostream>

using namespace std;

class Main {
  int a = 10;
  int b = 20;

  static void something_else() {
    if (a >= b) {
      if (a < 0)
        cout << "Fizz Buzz!" << endl;
    }

    if (a >= b) {
      if (a < 0)
        cout << "Fizz Buzz!" << endl;
    }
  }

  static void main();
};

void Main::main() {
  if (a >= b) {
    if (a < 0)
      cout << "Hello World!" << endl;
  }

  if (a >= b) {
    if (a < 0)
      cout << "Hello World!" << endl;
  }
}

int main() {
  Main::main();
}
\end{lstlisting}

***

%%%%%%%%
\subsubsection{Object Pascal}
%%%%%%%%

***

Для утилиты TXL существует грамматика, описывающая синтаксис языка Object Pascal, а именно, подмножества, использующегося средой быстрой разработки приложений Borland Delphi 2006.

***

\begin{lstlisting}[frame=single, language=Pascal, label={test-delphi}, caption={Исходный текст тестового приложения}]
program test;

uses
  SysUtils;

type
  Main = class
  public
    a: integer;
    b: integer;

    procedure something_else(args: array of string);
    procedure main(args: array of string);
  end;

procedure Main.something_else(args: array of string);
begin
  if a >= b then
  begin
    if a < 0 then
      System.writeln('Fizz Buzz!');
  end;

  if a >= b then
  begin
    if a < 0 then
      System.writeln('Fizz Buzz!');
  end;
end;

procedure Main.main(args: array of string);
begin
  if a >= b then
  begin
    if a < 0 then
      System.writeln('Hello World!');
  end;

  if a >= b then
  begin
    if a < 0 then
      System.writeln('Hello World!');
  end;
end;

begin
  with Main.Create do
  begin
    a := 10;
    b := 20;
    main(['text']);

    Free;
  end;
end.
\end{lstlisting}

***

%%%%%%%%
\subsubsection{Java}
%%%%%%%%

***

Для утилиты TXL существует грамматика, описывающая синтаксис языка Java версии 8.

***

\begin{lstlisting}[frame=single, language=Java, label={test-java}, caption={Исходный текст тестового приложения}]
package com.test;

import java.util.logging.Level;
import java.util.logging.ConsoleHandler;

public class Main {
  public static int a = 10;
  public static int b = 20;

  public static void something_else(String[] args) {
    if (a >= b) {
      if (a < 0)
        System.out.println("Fizz Buzz!");
    }

    if (a >= b) {
      if (a < 0)
        System.out.println("Fizz Buzz!");
    }
  }

  public static void main(String[] args) {
    if (a >= b) {
      if (a < 0)
        System.out.println("Hello World!");
    }

    if (a >= b) {
      if (a < 0)
        System.out.println("Hello World!");
    }
  }
}
\end{lstlisting}

***

%%%%%%%%
\subsubsection{Python}
%%%%%%%%

***

Для утилиты TXL существует грамматика, описывающая синтаксис языка Python версии 2.5 и некоторые элементы из 3.0.

***

\begin{lstlisting}[frame=single, language=Python, label={test-python}, caption={Исходный текст тестового приложения}]
from logging import *

class Main:
    def __init__(self):
        self.a = 10
        self.b = 20

    def something_else(self, args):
        if self.a >= self.b:
          if a < 0:
            print "Fizz Buzz!"

        if a >= b:
          if a < 0:
            print "Fizz Buzz!"

    def main(self, args):
        if self.a >= self.b:
          if self.a < 0:
            print "Hello World!"

        if self.a >= self.b:
          if self.a < 0:
            print "Hello World!"

Main().main({})
\end{lstlisting}

***

%%%%%%%%%%%%%%%%%%
\subsection{Фрагменты исходных текстов}
%%%%%%%%%%%%%%%%%%

***

%%%%%%%%%%%%%%%%%%
\subsection{Правила инструментирования}
%%%%%%%%%%%%%%%%%%

***

Составлены правила инструментирования для языков со строгой поддержкой структурного программирования (Java, Python) и не строгой (Pascal, C/C++).

***

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Выводы}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

***
